SCRIPTS

SCRIPT newbie_init

  IF newbieInitialized
    IFNOT tutor_moremissions
      IFNOT outpostInitialized
        SetFocus btutor
      END_OF_IF
    END_OF_IF
  END_OF_IF
  IF newbieInitialized
    RETURN
  END_OF_IF
  SET newbieInitialized
  ShowNode newbie
  SetNodeKnown newbie
  RESET visited
  SUB_SCRIPT registerVisited
  ShowButton btutor
  SetFocus btutor
  IF_DEBUG
    ShowButton bdebugstart
  END_OF_IF
  MovePlayerToNode newbie
END_OF_SCRIPT
SCRIPT outpost_init

  SET merchantLeftAtPurple
  IF outpostInitialized
    RETURN
  END_OF_IF
  SET outpostInitialized
  SetNodeKnown outpost
  SUB_SCRIPT registerVisited
  ShowButton bambassador
  SetFocus bambassador
  ShowButton bvip
  IFNOT regulaInitialized
    ShowNode "regula"
    ShowPath "R1-4a"
    ShowPath "R1-4b1"
  ELSE
    HidePath "R1-4b"
    ShowPath "R1-4b1"
  END_OF_IF
  IFNOT tutor_moremissions
    ShowPath "R1-2a"
    ShowPath "R1-2b"
    SET tutor_moremissions
    ResetFocus btutor
  END_OF_IF
END_OF_SCRIPT
SCRIPT bar_init

  IFNOT class3
    ResetFocus btutor
  END_OF_IF
  IF barInitialized
    RETURN
  END_OF_IF
  SET barInitialized
  SetNodeKnown bar
  SUB_SCRIPT registerVisited
  ShowButton bbartender
  SetFocus bbartender
  SET sailorAvailable
  ShowButton bguests
  IF_MIN visited 7
    SetFocus bguests
  END_OF_IF
  IFNOT regulaInitialized
    ShowNode "regula"
    ShowPath "R1-3a"
    ShowPath "R1-3b"
  END_OF_IF
END_OF_SCRIPT
SCRIPT regula_init

  IF forgeInitialized
    IFNOT class3Asked
      SetFocus bclerk
    END_OF_IF
  END_OF_IF
  IF regulaInitialized
    IF outpostInitialized
      IFNOT mechOffered
        ShowButton bmech
        IF forgeInitialized
          SetFocus bmech
        END_OF_IF
      END_OF_IF
    END_OF_IF
  END_OF_IF
  SET mechLeftAtRegula
  IF_DEBUG
    ShowButton bdebugcredits
  END_OF_IF
  IF regulaInitialized
    RETURN
  END_OF_IF
  SET regulaInitialized
  SetNodeKnown regula
  SUB_SCRIPT registerVisited
  ShowButton bclerk
  ShowButton bmech
  SetFocus bclerk
  IFNOT barInitialized
    ShowNode "bar"
    ShowPath "R1-3a"
    ShowPath "R1-3b"
  END_OF_IF
  IFNOT outpostInitialized
    ShowNode "outpost"
    ShowPath "R1-4a"
    ShowPath "R1-4b"
  END_OF_IF
END_OF_SCRIPT
SCRIPT workshop_init

  IF designDouble1Unlocked
    IF class2
      IFNOT designDouble2Ready
        SET designDouble2Ready
        SetFocus bworkshop
      END_OF_IF
    END_OF_IF
  END_OF_IF
  IF designDouble3Asked
    IFNOT designDouble3Ready
      SET designDouble3Ready
      SetFocus bworkshop
    END_OF_IF
  END_OF_IF
  IF workshopInitialized
    RETURN
  END_OF_IF
  SET workshopInitialized
  SetNodeKnown workshop
  SUB_SCRIPT registerVisited
  IF labWorkshopPending
    RESET labWorkshopPending
    SET labWorkshopSolved
  END_OF_IF
  ShowButton bworkshop
  SetFocus bworkshop
  ShowPath R1-8a
  ShowPath R1-8b
  IF forgeInitialized
    ShowPath R2-13a
    ShowPath R2-13b
  END_OF_IF
  IF labInitialized
    ShowPath R3-26a
    ShowPath R3-26b
  END_OF_IF
END_OF_SCRIPT
SCRIPT purpleHome_init

  SET merchantLeftAtPurple
  IF shortcutEnabled
    RESET shortcutEnabled
    HideButton bcyanshortcut
  END_OF_IF
  IF purpleHomeInitialized
    RETURN
  END_OF_IF
  SET purpleHomeInitialized
  SetNodeKnown purpleHome
  SUB_SCRIPT registerVisited
  ShowPath R1-5b
  ShowPath R1-5a
  ShowButton bpurple
  IF class3Asked
    SetFocus bpurple
  END_OF_IF
  ShowButton bmerchant
  SetFocus bmerchant
  IFNOT regulaInitialized
    ShowNode regula
  END_OF_IF
END_OF_SCRIPT
SCRIPT brownHome_init

  IF shortcutEnabled
    RESET shortcutEnabled
    HideButton bcyanshortcut
  END_OF_IF
  IF brownHomeInitialized
    RETURN
  END_OF_IF
  SET brownHomeInitialized
  SetNodeKnown brownHome
  SUB_SCRIPT registerVisited
  ShowButton bbrown
  ShowButton bmerchhelp
  SetFocus bbrown
  IFNOT regulaInitialized
    ShowNode regula
  END_OF_IF
  ShowPath R1-6a
  ShowPath R1-6b
  ShowPath R1-9a
  ShowPath R1-9b
END_OF_SCRIPT
SCRIPT cyanHome_init

  IF cyanHomeInitialized
    RETURN
  END_OF_IF
  SET cyanHomeInitialized
  SetNodeKnown cyanHome
  SUB_SCRIPT registerVisited
  ShowButton bcyan
  IFNOT merchant2Unlocked
    ShowPath R2-19a
  END_OF_IF
  ShowPath R2-19b
  IFNOT warriorTestUnlocked
    ShowPath R2-20a
  END_OF_IF
  ShowPath R2-20b
END_OF_SCRIPT
SCRIPT class2_inits

  SET class2
  ShowNode forge
  ShowPath R2-12a
  ShowPath R2-12b
  SET ratAvailable
  IF designSport1Unlocked
    ShowButton brichgirl2
    HideButton bvip2
    HideButton bvip
  END_OF_IF
END_OF_SCRIPT
SCRIPT class3_inits

  SET class3
  IF mine3shown
    ShowPath R3-24a
  END_OF_IF
  SetFocus btutor
  ShowPath R3-11a
  ShowPath R3-11b
  ShowButton bcyan
  ShowPath R3-10a
  ShowPath R3-10b
END_OF_SCRIPT
SCRIPT forge_init

  IF forgeInitialized
    RETURN
  END_OF_IF
  SET forgeInitialized
  SetNodeKnown forge
  SUB_SCRIPT registerVisited
  ShowButton bforeman
  ShowButton bclerk
  IF workshopInitialized
    ShowPath R2-13a
    ShowPath R2-13b
  END_OF_IF
END_OF_SCRIPT
SCRIPT pirateTrap_init

  HidePath U2-17a
  ShowNode pirateHaven
  SUB_SCRIPT pirateHaven_init
END_OF_SCRIPT
SCRIPT pirateHaven_init

  IF pirateHavenInitialized
    RETURN
  END_OF_IF
  SET pirateHavenInitialized
  SetNodeKnown pirateHaven
  SUB_SCRIPT registerVisited
  ShowPath R2-17a
  ShowPath R2-17b
  ShowButton bpirate1
  SetFocus bpirate1
  MovePlayerToNode pirateHaven
  HideNode pirateTrap
END_OF_SCRIPT
SCRIPT showDebugButtons

  IF barInitialized
    ShowButton bbarprogress
  END_OF_IF
END_OF_SCRIPT
SCRIPT registerVisited

  IF sailorFulfilled
    RETURN
  END_OF_IF
  ADD visited 1
  IF barInitialized
    IF_MIN visited 7
      SetFocus bguests
    END_OF_IF
  END_OF_IF
END_OF_SCRIPT
  SCRIPT barDebug
    IF_MAX visited 4
      Announce "5 odwiedzonych planet."
      SET_TO visited 5
    ELSE
      IF_MAX visited 6
        Announce "7 odwiedzonych planet."
        SET_TO visited 7
        SetFocus bguests
      ELSE
        IF treasurePlanet
          RESET treasurePlanet
          Announce "Odnalazł[g(eś|aś)] skarb."
        ELSE
          Announce "W tym miejscu nie ma jak kontynuować postępu."
        END_OF_IF
      END_OF_IF
    END_OF_IF
  END_OF_SCRIPT
SCRIPT mine0_init

  IF mine0Initialized
    RETURN
  END_OF_IF
  SET mine0Initialized
  SetNodeKnown mine0
  SUB_SCRIPT registerVisited
  ShowPath R2-14b
  ShowButton bmine0
END_OF_SCRIPT
SCRIPT mine1_init

  IF mine1Initialized
    RETURN
  END_OF_IF
  SET mine1Initialized
  SetNodeKnown mine1
  SUB_SCRIPT registerVisited
  ShowPath R2-15b
  ShowPath R1-22b
  ShowButton bmine1
END_OF_SCRIPT
SCRIPT mine2_init

  IF mine2Initialized
    RETURN
  END_OF_IF
  SET mine2Initialized
  SetNodeKnown mine2
  SUB_SCRIPT registerVisited
  ShowPath R2-16b
  ShowPath R2-23b
  ShowButton bmine2
END_OF_SCRIPT
SCRIPT mine3_init

  IF mine3Initialized
    RETURN
  END_OF_IF
  SET mine3Initialized
  SetNodeKnown mine3
  SUB_SCRIPT registerVisited
  ShowPath R3-24b
  ShowButton bmine3
  SetFocus bmine3
END_OF_SCRIPT
SCRIPT licenseApprovalCheck

  IF brownLicenseApproval
    IF purpleLicenseApproval
      SetFocusIfCredits bclerk 450
      ShowButton bcyanshortcut
      SET shortcutEnabled
    END_OF_IF
  END_OF_IF
  RETURN
END_OF_SCRIPT
SCRIPT recommendationCheck

  IF recommendationDesigner
    IF recommendationMerchant
      IF recommendationTutor
        SetFocus bclub
      END_OF_IF
    END_OF_IF
  END_OF_IF
  RETURN
END_OF_SCRIPT
SCRIPT club_init

  IF clubInitialized
    RETURN
  END_OF_IF
  SET clubInitialized
  SetNodeKnown club
  SUB_SCRIPT registerVisited
  ShowButton bclub
  SetFocus bclub
  IF labInitialized
    ShowPath R3-27a
    ShowPath R3-27b
  END_OF_IF
END_OF_SCRIPT
SCRIPT lab_init

  IF labInitialized
    RETURN
  END_OF_IF
  SET labInitialized
  SetNodeKnown lab
  SUB_SCRIPT registerVisited
  IF workshopInitialized
    ShowPath R3-26a
    ShowPath R3-26b
  END_OF_IF
  IF clubInitialized
    ShowPath R3-27a
    ShowPath R3-27b
  END_OF_IF
  ShowPath R3-28a
  ShowPath R3-28b
END_OF_SCRIPT

END_OF_SCRIPTS