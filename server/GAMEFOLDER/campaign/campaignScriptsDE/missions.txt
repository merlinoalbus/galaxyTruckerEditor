SCRIPTS

MISSION roughMission
  AddOpponent "roughTrucker"
  SetDeckPreparationScript "meteor1Deck"
  SetSpecCondition "bet"
  INIT_BUILD
  BuildingHelpScript 500 "tutorialAdditionalConcepts"
  RESET shouldShowFlightTutorial
  ModifyOpponentsBuildSpeed 75
  SetShipType STI
  SUB_SCRIPT stdParts
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  FlightHelpScript "tutorialAdditionalFlightConcepts"
  EVALUATE_FLIGHT
  ShowDlgScene
  ShowChar roughtrucker left
  Delay 500
  IF wasBet
    IfMissionResultIs 1
      Say "*Seufz.*"
      Say "Die Zockerei wird mich noch ruinieren."
      AddMissionCredits 3
      AddOpponentsCredits 1 -3
      Announce "Du hast 3 Credits von deinem Truckerkumpel bekommen."
      UnlockAchievement camp_bet
    ELSE
      IfMissionResultIs 0
        Say "Ich hab gewonnen. Rück die Kohle raus, [g(Jungchen|Schätzchen)]."
        AddMissionCredits -3
        AddOpponentsCredits 1 3
        Announce "Du musst deinem Truckerkumpel 3 Credits bezahlen."
      ELSE
        Say "Oha. So viel zu unserem Rennen. Es hat uns beide geschrottet."
        Say "Ich tippe, dass es daher keinen Gewinner gibt."
        Say "Vielleicht nächstes Mal."
      END_OF_IF
    END_OF_IF
  ELSE
    IfMissionResultIs 1
      Say "Oha. Mann, freue ich mich, dass du nicht gewettet hast."
    ELSE
      IfMissionResultIs 0
        Say "Ha, ich hab gewonnen! Zu schade, dass wir nicht gewettet haben."
      ELSE
        Say "Oha. So viel zu unserem Rennen. Es hat uns beide geschrottet."
      END_OF_IF
    END_OF_IF
  END_OF_IF
  Delay 300
  HideChar roughtrucker
  Delay 200
  HideDlgScene
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

SCRIPT purpleSupportInfo

  ShowDlgScene
  ChangeChar ambassador campaign/ambassador-peek.png
  ShowChar ambassador right
  Delay 300
  Say "Bitte geben Sie Herrn K'wwfrg eine gute Kabine. Und vergessen Sie nicht, sein Lebenserhaltungssystem daran anzuschließen."
  HideDlgScene
  AddInfoWindow "tutorial/infoPurpleLifeSupport.png"
  ShowInfoWindow "tutorial/infoPurpleLifeSupport.png"
  ShowDlgScene
  ChangeChar ambassador campaign/ambassador-peek.png
  ShowChar ambassador right
  Say "Nochmals danke. Ich hoffe, Sie kommen sicher an."
  Delay 300
  HideChar ambassador
  HideDlgScene
END_OF_SCRIPT

SCRIPT purpleAlienInfo

  AddInfoWindow "tutorial/infoPurpleAliens.png"
  ShowInfoWindow "tutorial/infoPurpleAliens.png"
END_OF_SCRIPT

SCRIPT brownInfo

  AddInfoWindow "tutorial/infoBrownLifeSupport.png"
  AddInfoWindow "tutorial/infoBrownAliens.png"
  ShowInfoWindow "tutorial/infoBrownLifeSupport.png"
  SET brownTutorial
END_OF_SCRIPT

MISSION purpleAlienEscort
  SUB_SCRIPT add2RandomOpponentsMedium
  SetDeckPreparationScript "originalDeck"
  SetSpecCondition "purplealien"
  INIT_BUILD
  BuildingHelpScript 1000 "purpleSupportInfo"
  SetAdvPile 1 3
  SetSecretAdvPile 1 3
  SetShipType STI
  SUB_SCRIPT stdParts
  AddPartToAsideSlot alienGun 2 1 2 0
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  AlienHelpScript "purpleAlienInfo"
  EVALUATE_FLIGHT
  IF_MISSION_WON
    ShowDlgScene
    ShowChar purpleGuard left
    Ask "Kzwrrr' kh! Hr ghz trrzk! TRRZK!"
    IfMissionResultMin 1
      MENU
        OPT "Bleibt mal locker, ich bringe euch diesen lila Typen hier."
          Delay 300
          Say "Kzwrrr' kh! Hr ghz trrzk! TRRZK!"
          Delay 1000
          ShowChar purpleDipl right
          Delay 500
          Say "Zrrg. H-hrng khzz q Th'kzw-r ..."
          Delay 300
          SayChar purpleGuard "Kh gz kwrr-g. Zhg."
          Delay 500
          HideChar purpleGuard
          Delay 300
          AskChar purpleDipl "Wrwg'gg kwrr-g. W'wg zhg-k."
          MENU
            OPT "Also ... dürfen wir einfach so landen, ja?"
              EXIT_MENU
            END_OF_OPT
          END_OF_MENU
          SayChar purpleDipl "Kzzh."
          Delay 300
          HideChar purpleDipl
          EXIT_MENU
        END_OF_OPT
      END_OF_MENU
    ELSE
      MENU
        OPT "He, ich hatte einen echt üblen Flug. Lasst ihr mich jetzt nicht mal landen?"
          Say "KHHH'WZ GHZ TRRZK!"
          EXIT_MENU
        END_OF_OPT
      END_OF_MENU
      MENU
        OPT "Ihr seid vermutlich sauer, weil ich diesen lila Typen nicht dabei habe, was?"
          Say "TRRZK!"
          Delay 1000
          HideChar purpleGuard
          SetMissionAsFailed
          EXIT_MENU
        END_OF_OPT
      END_OF_MENU
    END_OF_IF
    HideDlgScene
  END_OF_IF
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

SCRIPT tutorialSideMeteors

  AddInfoWindow "tutorial/infoBigSideMeteor.png"
  ShowInfoWindow "tutorial/infoBigSideMeteor.png"
  SET wasTutorialSideMeteors
END_OF_SCRIPT

MISSION meteorsSide
  AddOpponent richGirl
  IF_PROB 50
    SetDeckPreparationScript "meteor1LeftDeck"
  ELSE
    SetDeckPreparationScript "meteor1RightDeck"
  END_OF_IF
  SetSpecCondition "tilesBet"
  INIT_BUILD
  BuildingHelpScript 500 "tutorialSideMeteors"
  SetShipType STI
  SUB_SCRIPT stdParts
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  IF_MISSION_WON
    ShowDlgScene
    ShowChar richgirl left
    IfMissionResultMin 0
      Delay 300
      IfMissionResultMin 1
        Say "Tja, ich glaube du hattest diesmal mehr Glück als ich."
      ELSE
        Say "Hm. Gleichstand."
      END_OF_IF
      Say "Ich bin beeindruckt. Du bist fast so gut wie ich."
      IFNOT designSport1Unlocked
        Say "Hier. Du kannst mein Schiffsdesign haben. Du hast es dir verdient."
        Delay 300
        HideChar richgirl
        Delay 200
        UnlockShipPlan "I-sport"
        SET designSport1Unlocked
        Announce "Neues Design der Klasse I freigeschaltet."
        Delay 500
        SetAchievementProgress camp_design_sporty 1
        Delay 500
        HidePath "U1-4a"
        ShowPath "R1-4a1"
        IF class2
          HideButton bvip
          HideButton bvip2
          ShowButton brichgirl2
        END_OF_IF
      END_OF_IF
    ELSE
      Delay 300
      Say "Ich hab dann wohl gewonnen."
      Say "Nicht wirklich überraschend. Ich hoffe, du hast daraus gelernt."
      Delay 500
      HideChar richgirl
    END_OF_IF
    HideDlgScene
  END_OF_IF
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

MISSION meteorsSide2
  AddOpponent richGirl
  SetDeckPreparationScript "meteor2SidesDeck"
  SetSpecCondition "tilesBet"
  INIT_BUILD
  SetShipType STII
  SUB_SCRIPT stdParts
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  IF_MISSION_WON
    ShowDlgScene
    ShowChar richgirl left
    IfMissionResultMin 0
      Delay 300
      IfMissionResultMin 1
        Say "Unglaublich. Wie kann jemand bloß so viel Glück haben?"
      ELSE
        Say "War das wirklich ein Gleichstand?"
      END_OF_IF
      Say "Für einen Durchschnitts-Trucker bist du echt gut."
      IFNOT designSport2Unlocked
        Say "Hier. Nimm dir auch dieses Design. Ich weiß ja, dass es in guten Händen ist."
        Delay 300
        HideChar richgirl
        Delay 200
        UnlockShipPlan "II-sport"
        SET designSport2Unlocked
        Announce "Neues Design der Klasse II freigeschaltet."
        Delay 500
        SetAchievementProgress camp_design_sporty 2
        Delay 500
      END_OF_IF
    ELSE
      Delay 300
      Say "Ich hab dann wohl gewonnen."
      Say "Natürlich kannst du nicht erwarten, jedes Mal Glück zu haben. Immerhin hast du's versucht."
      Delay 500
    END_OF_IF
    HideChar richgirl
    HideDlgScene
  END_OF_IF
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

MISSION meteorsSideWithBot
  AddOpponent medium_safe
  IF_PROB 50
    SetDeckPreparationScript "meteor1LeftDeck"
  ELSE
    SetDeckPreparationScript "meteor1RightDeck"
  END_OF_IF
  INIT_BUILD
  SetShipType STI
  SUB_SCRIPT stdParts
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  ShowDlgScene
  ShowChar securitybot2 left
  Delay 300
  IF_MISSION_WON
    Say "GUT, SIE HABEN ES GESCHAFFT. GLUECK FUER MICH:"
  ELSE
    Say "ICH HABE ES IHNEN JA GESAGT."
  END_OF_IF
  Delay 300
  HideChar securitybot2
  Delay 300
  HideDlgScene
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

SCRIPT tutorialBooze

  ShowDlgScene
  ShowChar bartender left
  Say "Ich habe die Ladung fertig."
  Say "Natürlich werde ich Sie gut bezahlen, wenn sie heil ankommt. Wenn jedoch irgendwas kaputt geht, erwarte ich eine Rückvergütung."
  Delay 100
  HideDlgScene
  AddInfoWindow "tutorial/infoFragileCargo.png"
  ShowInfoWindow "tutorial/infoFragileCargo.png"
  ShowDlgScene
  ChangeChar bartender campaign/bartender-warehouse.png
  ShowChar bartender left
  Delay 200
  Say "Gute Reise. Oh, und nehmen Sie genug Besatzung mit!"
  Say "Einige meiner Kunden haben unerfreuliche Zwischenfälle erlebt, wenn sie zu kleine Besatzungen mitgenommen haben."
  HideChar bartender
  HideDlgScene
END_OF_SCRIPT

SCRIPT bartenderOverIntercom

  ChangeChar bartender campaign/bartender-overIntercom.png
  ShowChar bartender left
  Delay 100
  ChangeChar bartender campaign/bartender-overIntercom1.png
  Delay 100
  ChangeChar bartender campaign/bartender-overIntercom.png
  Delay 100
  ChangeChar bartender campaign/bartender-overIntercom1.png
  Delay 100
  ChangeChar bartender campaign/bartender-overIntercom.png
  Delay 100
  ChangeChar bartender campaign/bartender-overIntercom1.png
  Delay 200
  ChangeChar bartender campaign/bartender-overIntercom.png
  Delay 300
  ChangeChar bartender campaign/bartender-overIntercom1.png
  Delay 300
  ChangeChar bartender campaign/bartender-overIntercom.png
  Delay 300
END_OF_SCRIPT

MISSION booze2
  SUB_SCRIPT add3RandomOpponentsEasy
  SetDeckPreparationScript "boozeDeck"
  SetSpecCondition "booze"
  INIT_BUILD
  ModifyOpponentsBuildSpeed 75
  SetShipType STI
  SUB_SCRIPT stdParts
  AddPartToAsideSlot booze 2 1 2 0
  AddPartToAsideSlot booze 1 2 1 0
  BuildingHelpScript 500 "tutorialBooze"
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  ShowDlgScene
  IF_MISSION_WON
    SUB_SCRIPT bartenderOverIntercom
    IfMissionResultMin 2
      ADD totalBooze 2
      Say "Beide Kisten? Wunderbar! Hier sind 5 Credits für jede."
      AddMissionCredits 10
      Delay 500
      UnlockAchievement camp_booze
      Delay 500
    ELSE
      IfMissionResultMin 1
        ADD totalBooze 1
        Say "Sie haben meine Getränke zerbrochen? Immerhin haben Sie die andere Kiste heil abgeliefert. Dann sind wir quitt."
      ELSE
        Say "Sie haben meine Getränke zerbrochen? Nun, Sie haben ja zugestimmt, mir meine Verluste zu ersetzen. Das wären dann also 5 Credits pro Kiste."
        AddMissionCredits -10
      END_OF_IF
    END_OF_IF
  ELSE
    ChangeChar bartender campaign/bartender-warehouse.png
    ShowChar bartender left
    Delay 300
    IfMissionResultMin 2
      Say "Sie sind umgekehrt? Immerhin sind meine Kisten noch heil."
    ELSE
      IfMissionResultMin 1
        Say "Was? Sie sind umgekehrt? Und Sie haben eine meiner Kisten zerbrochen? Tut mir leid, aber dafür müssen Sie mir 5 Credits bezahlen."
        AddMissionCredits -5
      ELSE
        Say "Was ist mit meinen Getränken passiert? Ich brauche 10 Credits, um meinen Verlust auszugleichen."
        AddMissionCredits -10
      END_OF_IF
    END_OF_IF
  END_OF_IF
  HideChar bartender
  HideDlgScene
  SET boozeQuestTried
  HidePath R1-3a2
  ShowPath R1-3a
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

MISSION booze1
  SUB_SCRIPT add3RandomOpponentsEasy
  SetDeckPreparationScript "boozeDeck"
  SetSpecCondition "booze"
  INIT_BUILD
  ModifyOpponentsBuildSpeed 75
  SetShipType STI
  SUB_SCRIPT stdParts
  AddPartToAsideSlot booze 2 1 2 0
  BuildingHelpScript 500 "tutorialBooze"
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  ShowDlgScene
  IF_MISSION_WON
    SUB_SCRIPT bartenderOverIntercom
    IfMissionResultMin 1
      ADD totalBooze 1
      Say "Sie haben die Kiste abgeliefert? Wunderbar. Ich überweise sofort 5 Credits."
      AddMissionCredits 5
    ELSE
      Say "Sie haben meine Kiste geschrottet? Tja, dann sind wohl 5 Credits fällig."
      AddMissionCredits -5
    END_OF_IF
  ELSE
    ChangeChar bartender campaign/bartender-warehouse.png
    ShowChar bartender left
    Delay 300
    IfMissionResultMin 1
      Say "Sie sind umgekehrt? Na, immerhin ist meine Kiste noch heil."
    ELSE
      Say "Was ist mit meinen Getränken passiert? Sie schulden mir 5 Credits."
      AddMissionCredits -5
    END_OF_IF
  END_OF_IF
  HideChar bartender
  HideDlgScene
  SET boozeQuestTried
  HidePath R1-3a1
  ShowPath R1-3a
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

MISSION nobooze
  SUB_SCRIPT add3RandomOpponentsEasy
  SetDeckPreparationScript "boozeDeck"
  INIT_BUILD
  SetShipType STI
  SUB_SCRIPT stdParts
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

SCRIPT tutorialAdditionalFlightConcepts

  IFNOT shouldShowFlightTutorial
    RETURN
  END_OF_IF
  AddInfoWindow "tutorial/infoShipInfo.png"
  AddInfoWindow "tutorial/infoGivingUpFlight.png"
  AddInfoWindow "tutorial/infoGivingUpFlight2.png"
  ShowInfoWindow "tutorial/infoShipInfo.png"
END_OF_SCRIPT

SCRIPT tutorialAdditionalConcepts

  IF tutorialAdditional
    RETURN
  END_OF_IF
  IF_TUTORIAL_SEEN
    SET showAdditional
  ELSE
    IF tutorialRefused
      RESET showAdditional
    ELSE
      SET showAdditional
    END_OF_IF
  END_OF_IF
  IFNOT showAdditional
    RETURN
  END_OF_IF
  SET tutorialAdditional
  SET shouldShowFlightTutorial
  ShowDlgScene
  ShowChar tutor right
  Delay 300
  Say "Hallo [g(Anfänger|Anfängerin)]. Es gibt noch ein paar Dinge, die du über das Bauen wissen solltest."
  Say "He, alter Mann. Wo sind die Bildchen?"
  HideChar tutor
  HideDlgScene
  AddInfoWindow "tutorial/infoAsideSlots.png"
  AddInfoWindow "tutorial/infoLookingAtCards.png"
  ShowInfoWindow "tutorial/infoAsideSlots.png"
  ShowDlgScene
  ShowChar tutor right
  Delay 300
  Say "Hm. Du fragst dich, wo diese Kartenstapel sind, die du dir angeblich ansehen darfst."
  Say "Sie tauchen oben am Bildschirmrand auf, sobald du dein erstes Teil angeschweißt hast."
  Say "Gut, dann mal los. Viel Glück."
  HideChar tutor
  HideDlgScene
END_OF_SCRIPT

MISSION firstMission
  SUB_SCRIPT add2RandomOpponentsEasy
  SetDeckPreparationScript "firstMissionDeck"
  INIT_BUILD
  BuildingHelpScript 500 "tutorialAdditionalConcepts"
  RESET shouldShowFlightTutorial
  ModifyOpponentsBuildSpeed 75
  SetShipType STI
  SUB_SCRIPT stdParts
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  FlightHelpScript "tutorialAdditionalFlightConcepts"
  EVALUATE_FLIGHT
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

SCRIPT merchantGivesUp

  IF merchForcedFail
    RETURN
  END_OF_IF
  ShowDlgScene
  ChangeChar merchant campaign/merch-disappointed.png
  ShowChar merchant left
  Say "Das ging nicht so gut, wie ich gehofft hatte."
  Say "Na gut. Zurück also. Wir versuchen es ein andermal."
  SetMissionAsFailed
  SET merchForcedFail
  HideChar merchant
  HideDlgScene
END_OF_SCRIPT

MISSION merchantProtection
  AddOpponent merchant
  SetDeckPreparationScript "merchantDeck"
  RESET merchForcedFail
  INIT_BUILD
  SetAdvPile 1 3
  SetSecretAdvPile 1 3
  SetShipType STI
  SUB_SCRIPT stdParts
  SetSpecCondition "merchantProtect"
  START_BUILDING
  AddPartToShip 1 7 alienEngine 3333 0
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  IF_MISSION_WON
    IfMissionResultMin 3
      ShowDlgScene
      ShowChar merchant left
      Say "Jaaa! Geschafft! Und mit Massen von Waren."
      Say "Es war mir ein Vergnügen, mit dir Geschäfte zu machen."
      Say "Hier ist dein Anteil: [missionResult] Credits."
      AddMissionCreditsByResult
      SubOpponentCreditsByResult
      HideButton bmerchant
      Delay 500
      SetAchievementProgress camp_merchant 1
      Delay 300
      HidePath U1-9a
      ShowPath R1-9a
      ShowPath R1-9b
    ELSE
      ShowDlgScene
      ShowChar merchant left
      Say "Tja, wir sind angekommen. Aber viele Waren haben wir nicht."
      Say "Sinnlos, zu landen. Wir könnten damit nicht mal den Hafentarif bezahlen."
      Say "Wir sollten zurück und die Strecke später erneut versuchen."
      AllShipsGiveUp
      SET merchantFailed
      HidePath U1-9a
      SetFocus bmerchant
    END_OF_IF
    HideChar merchant
    HideDlgScene
  ELSE
    SET merchantFailed
    HidePath U1-9a
    SetFocus bmerchant
    IFNOT merchForcedFail
      ShowDlgScene
      ChangeChar merchant campaign/merch-disappointed.png
      ShowChar merchant left
      Say "Du verlässt mich? Ich werde nicht riskieren, den Rest der Strecke alleine zu fliegen."
      Say "Ich komme mit dir zurück. Vielleicht klappt es das nächste Mal besser."
      AllShipsGiveUp
      HideChar merchant
      HideDlgScene
    END_OF_IF
  END_OF_IF
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

MISSION merchantProtection2
  AddOpponent merchant
  SetDeckPreparationScript "merchantDeck2"
  RESET merchForcedFail
  INIT_BUILD
  SetAdvPile 1 1
  SetAdvPile 2 3
  SetSecretAdvPile 1 1
  SetSecretAdvPile 2 3
  SetShipType STII
  SUB_SCRIPT stdParts
  SetSpecCondition "merchantProtect"
  IF brownUnlocked
    IFNOT brownTutorial
      BuildingHelpScript 500 brownInfo
    END_OF_IF
  END_OF_IF
  START_BUILDING
  AddPartToShip 1 17 alienEngine 3333 0
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  IF_MISSION_WON
    IfMissionResultMin 5
      ShowDlgScene
      ShowChar merchant left
      Say "Jaaa! Geschafft! Und mit Massen von Waren."
      Say "Es war mir erneut ein Vergnügen, mit dir Geschäfte zu machen."
      Say "Hier ist dein Anteil: [missionResult] Credits."
      AddMissionCreditsByResult
      SubOpponentCreditsByResult
      Delay 500
      SetAchievementProgress camp_merchant 2
      Delay 300
      HidePath U2-19a
      ShowPath R2-19a
      ShowPath R2-19b
      Say "Oh ... und hier ist dein Gutschein von den braunen Jungs."
      Say "Ich hatte ihn die ganze Zeit in der Tasche."
      SUB_SCRIPT merchantLaughA
      Announce "Gutschein der braunen Aliens für eine Klasse-III-Lizenz erhalten."
      SET brownLicenseApproval
      SUB_SCRIPT licenseApprovalCheck
      ShowButton bcyanmerch
    ELSE
      ShowDlgScene
      ShowChar merchant left
      Say "Tja, wir sind angekommen. Aber wir haben nicht genug Waren."
      Say "Sinnlos, zu landen. Wir könnten damit nicht mal den Hafentarif bezahlen."
      Say "Wir sollten zurück und die Strecke später erneut versuchen."
      AllShipsGiveUp
      SET merchantFailed
    END_OF_IF
    HideChar merchant
    HideDlgScene
  ELSE
    SET merchantFailed
    IFNOT merchForcedFail
      ShowDlgScene
      ChangeChar merchant campaign/merch-disappointed.png
      ShowChar merchant left
      Say "Du verlässt mich? Ich werde nicht riskieren, den Rest der Strecke alleine zu fliegen."
      Say "Ich komme mit dir zurück. Vielleicht klappt es das nächste Mal besser."
      AllShipsGiveUp
      HideChar merchant
      HideDlgScene
    END_OF_IF
  END_OF_IF
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

MISSION merchantProtection3
  AddOpponent merchant
  SetDeckPreparationScript "merchantDeck3"
  RESET merchForcedFail
  INIT_BUILD
  SetAdvPile 1 1
  SetAdvPile 2 1
  SetAdvPile 3 3
  SetSecretAdvPile 1 1
  SetSecretAdvPile 2 1
  SetSecretAdvPile 3 3
  SetShipType STIII
  SUB_SCRIPT stdParts
  SetSpecCondition "merchantProtect"
  START_BUILDING
  AddPartToShip 1 22 alienEngine 3333 0
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  IF_MISSION_WON
    ShowDlgScene
    ShowChar merchant left
    Say "Jaaa! Wir sind aus dem Alien-Territorium raus!"
    IfMissionResultIs 0
      Say "Ich habe zwar keine Waren, aber was soll's. Immerhin sind wir am Leben."
    ELSE
      IfMissionResultMin 8
        Say "Und was noch besser ist: ich habe massenweise Waren zum Verkauf!"
      ELSE
        IfMissionResultMin 4
          Say "Und ich habe sogar eine Menge Waren unterwegs aufgegabelt!"
        ELSE
          Say "Und ich habe sogar ein paar Waren unterwegs bekommen."
        END_OF_IF
      END_OF_IF
      Say "Hier ist dein Anteil: [missionResult] Credits."
      AddMissionCreditsByResult
      SubOpponentCreditsByResult
    END_OF_IF
    Delay 500
    SetAchievementProgress camp_merchant 3
    Delay 300
    HidePath U3-29a
    ChangeChar merchant campaign/merch-inviting.png
    Say "Du kannst eine Empfehlung von mir haben. Niemand verdient sie mehr als du."
    SET recommendationMerchant
    SET recommendationMerchantUntold
    Announce "Empfehlung des Geschäftsmanns erhalten."
    SUB_SCRIPT recommendationCheck
    Say "Danke für alles. Das war wirklich ein Abenteuer!"
    SUB_SCRIPT merchantLaughB
    Say "Alles Gute."
    HideChar merchant
    HideDlgScene
  ELSE
    SET merchant3Failed
    IFNOT merchForcedFail
      ShowDlgScene
      ChangeChar merchant campaign/merch-disappointed.png
      ShowChar merchant left
      Say "Du verlässt mich? Ich werde nicht riskieren, den Rest der Strecke alleine zu fliegen."
      Say "Ich komme mit dir zurück. Vielleicht können wir ja später flüchten."
      AllShipsGiveUp
      HideChar merchant
      HideDlgScene
    END_OF_IF
  END_OF_IF
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

MISSION alienPlanets
  IF_PROB 50
    AddOpponent purple2
  ELSE
    AddOpponent brown2
  END_OF_IF
  IF_PROB 75
    IF_PROB 50
      AddOpponent purple2
    ELSE
      AddOpponent brown2
    END_OF_IF
    IF_PROB 50
      IF_PROB 50
        AddOpponent purple2
      ELSE
        AddOpponent brown2
      END_OF_IF
    END_OF_IF
  END_OF_IF
  SetDeckPreparationScript "digitalDeck"
  INIT_BUILD
  SetShipType STI
  SUB_SCRIPT stdParts
  IF brownUnlocked
    IFNOT brownTutorial
      BuildingHelpScript 500 brownInfo
    END_OF_IF
  END_OF_IF
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

MISSION alienPlanets2brown
  IF_PROB 50
    AddOpponent cyan2
  ELSE
    AddOpponent brown2
  END_OF_IF
  IF_PROB 75
    IF_PROB 50
      AddOpponent cyan2
    ELSE
      AddOpponent brown2
    END_OF_IF
    IF_PROB 50
      IF_PROB 50
        AddOpponent cyan2
      ELSE
        AddOpponent brown2
      END_OF_IF
    END_OF_IF
  END_OF_IF
  SetDeckPreparationScript "digitalDeck"
  INIT_BUILD
  SetShipType STII
  SUB_SCRIPT stdParts
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

MISSION alienPlanets2purple
  IF_PROB 50
    AddOpponent cyan2
  ELSE
    AddOpponent purple2
  END_OF_IF
  IF_PROB 75
    IF_PROB 50
      AddOpponent cyan2
    ELSE
      AddOpponent purple2
    END_OF_IF
    IF_PROB 50
      IF_PROB 50
        AddOpponent cyan2
      ELSE
        AddOpponent purple2
      END_OF_IF
    END_OF_IF
  END_OF_IF
  SetDeckPreparationScript "digitalDeck"
  INIT_BUILD
  SetShipType STII
  SUB_SCRIPT stdParts
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

MISSION warriorTest
  AddOpponent purple2
  AddOpponent purple2
  AddOpponent purple2
  SetDeckPreparationScript "battleZones"
  INIT_BUILD
  SetShipType STII
  SUB_SCRIPT stdParts
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  IF_MISSION_WON
    ShowDlgScene
    ShowChar purple left
    Delay 300
    Say "Zh wrrzk-hrrg krz'h!"
    Delay 300
    ShowChar purple2 right
    Delay 300
    Say "Ghrrk-zhr ww'gh wrrzk-hrrg krz'h!"
    Delay 300
    Announce "Das lila Alien gibt dir einen Gutschein für eine Lizenz der Klasse III."
    SET purpleLicenseApproval
    SUB_SCRIPT licenseApprovalCheck
    HideChar purple2
    Delay 300
    HideChar purple
    HideDlgScene
    HidePath U2-20a
    ShowPath R2-20a
  END_OF_IF
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

MISSION noMerchant
  SUB_SCRIPT add2RandomOpponentsMedium
  SetDeckPreparationScript "merchantDeck"
  INIT_BUILD
  SetShipType STI
  SUB_SCRIPT stdParts
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

SCRIPT tutorialEpidemy

  ShowDlgScene
  ShowChar mech right
  Delay 200
  Say "Hi. Ich bin's wieder."
  ChangeChar mech campaign/mech-explaining.png
  Say "ich habe gehört, dass irgendein Virus umgehen soll."
  Ask "Um auf Nummer Sicher zu gehen, solltest du nie zwei Kabinen direkt nebeneinander legen, okay? Ansonsten könnten die Leute krank werden."
  MENU
    OPT "Verstanden. Keine Sorge. Ich bin schon vorsichtig."
      EXIT_MENU
    END_OF_OPT
  END_OF_MENU
  Delay 300
  ChangeChar mech campaign/mech-thumbup.png
  Delay 300
  Say "Okay, danke nochmal. Und viel Glück!"
  HideChar mech
  HideDlgScene
END_OF_SCRIPT

MISSION peopleDelivery
  SUB_SCRIPT add2RandomOpponentsMedium
  SetDeckPreparationScript "epidemyDeck"
  INIT_BUILD
  IFNOT wasTutorialEpidemy
    SET wasTutorialEpidemy
    BuildingHelpScript 1000 tutorialEpidemy
  END_OF_IF
  SetShipType STI
  SUB_SCRIPT stdParts
  SetSpecCondition "peopleDelivery"
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  IF_MISSION_WON
    ShowDlgScene
    ShowChar mech right
    IFNOT nextPeopleDelivery
      Say "Willkommen bei unserer Fabrik. Hast du mir jemanden mitgebracht?"
    ELSE
      Say "Schön, dich zu sehen! Bringst du mir noch mehr Leute?"
    END_OF_IF
    IfMissionResultMin 0
      ChangeChar mech campaign/mech-explaining.png
      IfMissionResultMin 10
        Say "So viele Leute? Und alle sind gesund?! Du bist großartig!!!"
        Delay 300
        ChangeChar mech campaign/mech-kiss.png
        Delay 300
        Say "*Schmatz!*"
        Delay 300
        ChangeChar mech campaign/mech.png
        Delay 600
        ChangeChar mech campaign/mech-blush.png
        Delay 300
        Say "'Tschuldigung. Da ist es wohl mit mir durchgegangen."
        UnlockAchievement camp_kiss
        Delay 300
        ChangeChar mech campaign/mech.png
        SET wasKiss
      ELSE
        IfMissionResultMin 8
          Say "Das sind eine Menge Leute. Und alle sind gesund? Du bist der Beste!"
          Delay 200
          ChangeChar mech campaign/mech-blush.png
          Delay 200
          IFNOT wasKiss
            Say "'Tschuldigung. Ich war so aufgeregt, dass ich dich beinahe geküsst hätte."
          ELSE
            Say "'Tschuldigung. Es wäre fast schon wieder mit mir durchgegangen."
          END_OF_IF
          Delay 300
          ChangeChar mech campaign/mech.png
        ELSE
          IfMissionResultMin 6
            Say "Gute Arbeit. Freut mich, dass alle okay sind."
          ELSE
            Say "Sind das alle? Immerhin ist keiner verletzt worden. Gute Arbeit."
          END_OF_IF
        END_OF_IF
      END_OF_IF
      IFNOT nextPeopleDelivery
        Say "Hier sind [missionResult] Credits. Vielen Dank."
        AddMissionCreditsByResult
        Say "Wenn du das nächste Mal hier lang kommst, halte bei den Regula-Docks an und schau, ob von unseren Leuten welche mitgenommen werden wollen."
        Say "Kann sein, dass ich dich nicht bezahlen kann, aber die Leute werden für den Flug arbeiten."
        SET nextPeopleDelivery
        HidePath "U1-7a"
        ShowPath "R1-7a"
        ShowPath "R1-7b"
      ELSE
        Say "Vielen Dank. Ich war mir nicht sicher, ob ich dir für diesen Trip etwas bezahlen könnte ..."
        IfMissionResultMin 8
          Say "Aber ich denke, 3 Credits kann ich dir geben. Die hast du verdient."
          AddMissionCredits 3
        ELSE
          IfMissionResultMin 5
            Say "Aber hier sind 2 Credits für deine Mühen."
            AddMissionCredits 2
          ELSE
            Say "Hier hast du 1 Credit, weil du's versucht hast."
            AddMissionCredits 1
          END_OF_IF
        END_OF_IF
        Say "Und bring uns beim nächsten Mal auf dieser Strecke mehr Leute mit, okay?"
      END_OF_IF
    ELSE
      SET peopleDeliveryFailed
      IfMissionResultMin -2
        Say "Das sind ... nicht alle."
      ELSE
        IfMissionResultMin -4
          Say "Oh nein. Was ist mit den anderen passiert?"
        ELSE
          Say "Oh nein! Das reinste Massaker!"
        END_OF_IF
      END_OF_IF
      IFNOT nextPeopleDelivery
        Say "Wie traurig!"
        MENU
          OPT "Es tut mir so leid!"
            EXIT_MENU
          END_OF_OPT
        END_OF_MENU
        ChangeChar mech campaign/mech.png
        Say "Das glaube ich dir. Ich weiß, dass du's versucht hast."
        ChangeChar mech campaign/mech-f.png
        Say "Nun, was kann man tun? Zurück nach Regula, um weitere Leute zu finden."
        ChangeChar mech campaign/mech.png
        Ask "Kannst du mich mitnehmen?"
        MENU
          OPT "Sicher. Wenn das hilft."
            Say "Danke."
            SetMissionAsFailed
            EXIT_MENU
          END_OF_OPT
        END_OF_MENU
      ELSE
        Say "Ich bin sicher, dass du versucht hast, sie zu retten."
        Say "Sei aber das nächste Mal vorsichtiger."
      END_OF_IF
    END_OF_IF
    HideChar mech
    HideDlgScene
  ELSE
    IFNOT nextPeopleDelivery
      ShowDlgScene
      ChangeChar mech campaign/mech-intercom.png
      ShowChar mech right
      Ask "Was ist los?"
      IfMissionResultMin 0
        MENU
          OPT "Wir kehren um. Aber keine Sorge. Allen geht es gut."
            EXIT_MENU
          END_OF_OPT
        END_OF_MENU
      ELSE
        MENU
          OPT "Ich will's gar nicht wissen."
            EXIT_MENU
          END_OF_OPT
        END_OF_MENU
      END_OF_IF
      Say "Okay. Vermutlich passieren solche Sachen eben. Ich gehe auch nach Regula zurück."
      SET peopleDeliveryFailed
      HideChar mech
      HideDlgScene
    END_OF_IF
  END_OF_IF
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

MISSION universalEpidemic
  SUB_SCRIPT addRandomOpponentsMedium
  SetDeckPreparationScript "epidemyDeck"
  INIT_BUILD
  SetShipType STI
  SUB_SCRIPT universalParts
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

MISSION universalSabotages
  SUB_SCRIPT addRandomOpponentsMedium
  SetDeckPreparationScript "boozeDeck"
  INIT_BUILD
  SetShipType STI
  SUB_SCRIPT universalParts
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

MISSION universal3long
  SUB_SCRIPT addRandomOpponentsMedium
  SetDeckPreparationScript "digitalDeck"
  INIT_BUILD
  SetAdvPile 1 1
  SetAdvPile 2 1
  SetAdvPile 3 3
  SetSecretAdvPile 1 1
  SetSecretAdvPile 2 1
  SetSecretAdvPile 3 3
  SetShipType STIII
  SUB_SCRIPT universalParts
  START_BUILDING
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

SCRIPT ingotsIntro

  ShowDlgScene
  ShowChar foreman left
  Delay 750
  IF ingotsFailedDelivery
    ChangeChar foreman campaign/foreman-no.png
    Say "Grüß Gott, ich hab gehört, du hast es beim letzten Mal nicht geschafft."
    ChangeChar foreman campaign/foreman.png
    Say "Mach dir keine Sorgen. Ich gebe dir eine neue Chance. Ich bin ein netter Kerl."
    Say "(Außerdem macht ja sonst keiner diesen Job.)"
    RESET ingotsFailedDelivery
  ELSE
    ChangeChar foreman campaign/foreman-whatsup.png
    IF oneingot
      IF ing3
        Say "Jawollja, hier bitteschön: Ein megamassiver Barren aus reinem kosmischen Stahl."
        ChangeChar foreman campaign/foreman-smile.png
        Say "Vergiss aber nicht, ihn an deinem Schiff anzubringen, kapiert?"
      ELSE
        Say "Jawollja, hier hast du noch einen Barren. Pfundig, was?"
      END_OF_IF
    END_OF_IF
    IF twoingots
      Say "Gut, hier hast du's: Zwei glänzende Barren. Pass aber gut auf."
    END_OF_IF
    IF threeingots
      Say "Herrschaftszeiten! Drei Barren. Sind die nicht wunderhübsch?"
      ChangeChar foreman campaign/foreman-smile.png
      Say "Ich hab einen an deinem Schiff angeschweißt. Ich denke, das geht so klar, oder?"
    END_OF_IF
  END_OF_IF
  HideDlgScene
  AddInfoWindow "tutorial/infoHeavyCargo.png"
  ShowInfoWindow "tutorial/infoHeavyCargo.png"
  ShowDlgScene
  ShowChar foreman left
  Delay 500
  ChangeChar foreman campaign/foreman-hello.png
  Say "Pass aber gut auf."
  HideChar foreman
  HideDlgScene
END_OF_SCRIPT

MISSION ingotDelivery
  SUB_SCRIPT add2RandomOpponentsMedium
  SetDeckPreparationScript "ingotDeck"
  INIT_BUILD
  SetSpecCondition "ingots"
  BuildingHelpScript 1000 ingotsIntro
  SetShipType STII
  SUB_SCRIPT stdParts
  START_BUILDING
  IF ing2
    AddPartToAsideSlot ingot2 2 1 0 0
  END_OF_IF
  IF ing3
    AddPartToAsideSlot ingot3 3 2 0 0
  END_OF_IF
  IF ing4
    AddPartToAsideSlot ingot4 2 3 2 0
  END_OF_IF
  IF ing5
    AddPartToAsideSlot ingot5 1 3 1 0
  END_OF_IF
  IF ing6
    AddPartToAsideSlot ingot4 1 3 2 3
  END_OF_IF
  IF ing8
    AddPartToAsideSlot ingot4 2 1 2 0
  END_OF_IF
  IF twoingots
    IF ing2
      AddPartToAsideSlot ingot2 3 0 3 0
    END_OF_IF
    IF ing3
      AddPartToAsideSlot ingot3 1 2 1 0
    END_OF_IF
    IF ing4
      AddPartToAsideSlot ingot4 3 0 3 0
    END_OF_IF
  END_OF_IF
  IF threeingots
    IF ing2
      AddPartToAsideSlot ingot2 1 3 2 0
      AddPartToShip 0 17 ingot2 2323 0
    END_OF_IF
    IF ing3
      AddPartToAsideSlot ingot3 3 2 3 0
      AddPartToShip 0 17 ingot3 1212 0
    END_OF_IF
  END_OF_IF
  END_BUILDING
  INIT_FLIGHT
  START_FLIGHT
  EVALUATE_FLIGHT
  RESET allok
  RESET somemissing
  RESET allmissing
  IF_MISSION_WON
    IfMissionResultMin 1
      IfMissionResultMin 2
        IfMissionResultMin 3
          SET allok
        ELSE
          IF threeingots
            SET somemissing
          ELSE
            SET allok
          END_OF_IF
        END_OF_IF
      ELSE
        IF oneingot
          SET allok
        ELSE
          SET allmissing
        END_OF_IF
      END_OF_IF
    END_OF_IF
    ShowDlgScene
    ShowChar mech right
    Delay 500
    IFNOT ingotDeliveryAttempt
      Say "Du musst der Trucker sein. Ich bin... Oh! DU bist das!"
      ChangeChar mech campaign/mech-explaining.png
      Say "Schön, dich wiederzusehen. Ich bin hier für die Lieferungen verantwortlich."
      SET ingotDeliveryAttempt
    ELSE
      ChangeChar mech campaign/mech-explaining.png
      Say "Hi! Schön, dich wiederzusehen."
    END_OF_IF
    IF allok
      ChangeChar mech campaign/mech-thumbup.png
      Say "Jepp. Diese Lieferung sieht gut aus."
      Say "Hier bitte:"
      HideAllPaths forge workshop
      ShowPath R2-13a
      RESET ingotsPending
      SET ingotsFulfilledOnce
      IF oneingot
        IF ing3
          AddMissionCredits 9
          Announce "Du hast 9 Credits erhalten."
          SetAchievementAttempt camp_ingots 9
        END_OF_IF
        IF ing5
          AddMissionCredits 12
          Announce "Du hast 12 Credits erhalten."
          SetAchievementAttempt camp_ingots 12
        END_OF_IF
        IF ing6
          AddMissionCredits 15
          Announce "Du hast 15 Credits erhalten."
          SetAchievementAttempt camp_ingots 15
        END_OF_IF
        IF ing8
          AddMissionCredits 18
          Announce "Du hast 18 Credits erhalten."
          SetAchievementAttempt camp_ingots 18
        END_OF_IF
      END_OF_IF
      IF twoingots
        IF ing2
          AddMissionCredits 12
          Announce "Du hast 12 Credits erhalten."
          SetAchievementAttempt camp_ingots 12
        END_OF_IF
        IF ing3
          AddMissionCredits 18
          Announce "Du hast 18 Credits erhalten."
          SetAchievementAttempt camp_ingots 18
        END_OF_IF
        IF ing4
          AddMissionCredits 22
          Announce "Du hast 22 Credits erhalten."
          SetAchievementAttempt camp_ingots 22
        END_OF_IF
      END_OF_IF
      IF threeingots
        IF ing2
          AddMissionCredits 21
          Announce "Du hast 21 Credits erhalten."
          SetAchievementAttempt camp_ingots 21
        END_OF_IF
        IF ing3
          AddMissionCredits 30
          Announce "Du hast 30 Credits erhalten."
          SetAchievementProgress camp_ingots 30
        END_OF_IF
      END_OF_IF
    ELSE
      IF somemissing
        ChangeChar mech campaign/mech-f.png
        Say "Hm. Das ist nicht die gesamte Lieferung."
        Say "Verzeihung, aber eine Teillieferung unterschreibe ich nicht."
        ChangeChar mech campaign/mech-explaining-f.png
        Ask "So sind die Regeln. Direkt von Regula."
      ELSE
        ChangeChar mech campaign/mech-f.png
        Say "Warte ... wo ist die Lieferung?"
        ChangeChar mech campaign/mech-explaining-f.png
        Ask "Schau mal: wir brauchen Barren. Wir können die Produktion nicht einfach runterfahren."
      END_OF_IF
      MENU
        SET ingotsFailedDelivery
        OPT "Ich weiß. Ich fliege zurück und versuche es erneut."
          SetMissionAsFailed
          ChangeChar mech campaign/mech-thumbup.png
          Say "Danke. Ich weiß das zu schätzen. Ich weiß, dass ein Barrentransport nicht gerade einfach ist."
          EXIT_MENU
        END_OF_OPT
      END_OF_MENU
    END_OF_IF
    Delay 300
    HideChar mech
    HideDlgScene
  ELSE
    SET ingotsFailed
  END_OF_IF
  END_FLIGHT
  FINISH_MISSION
END_OF_MISSION

END_OF_SCRIPTS
